\section{Introduction}\label{sec:intro}
The Domain Name System (DNS) is a critical component of the Internet's infrastructure that translates human-readable domain names (\eg, \texttt{google.com}) into Internet Protocol (IP) addresses~\cite{dns-rfcs}.
Most Internet activity begins with clients sending DNS queries to \emph{recursive resolvers}, which in turn query \emph{name servers} for the desired data.
The \emph{response times} of these queries-—\i.e., the time it takes to contact a recursive resolver, query various name servers, and return the results—-is important because the DNS underlies virtually all communication on the Internet.
For example, when a user attempts to load a web page, they often need to resolve the domain names for each object on the page before the objects themselves can be retrieved.
Thus, if DNS resolution is slow, then, page loads will likely also slow down.

The DNS did not originally take user privacy and security into account.
Traditionally, DNS queries have been unencrypted, leaving users susceptible to eavesdropping attacks~\cite{dns-eavesdrop}.
DNS queries can also be intercepted and manipulated to re-direct users to malicious websites~\cite{dns-redirect}.
In order to address user privacy and security, multiple encrypted DNS protocols have been developed, such as DNS-over-HTTPS (DoH)~\cite{rfc8484}.
DoH enables clients to communicate with recursive resolvers over HTTPS, providing privacy and security guarantees that the DNS previously lacked.

However, most deployments of DoH have occurred in browsers that provide limited options of resolvers~\cite{ffChoices,chromeResolvers}.
If users continue to adopt encrypted DNS and rely on a small set of recursive resolvers, these resolvers will have increased visibility into data that was previously available to a multitude of resolvers.
Such data includes queries that correspond to users' web browsing histories.

\begin{table}
    \centering
    \begin{tabular}{lrrrrrr}
    \hline
    Browser & Cloudflare & Google & Quad9 & NextDNS & CleanBrowsing & OpenDNS
    \\
    \midrule
    Chrome    & \textbf{Yes} & \textbf{Yes} & No & \textbf{Yes} & \textbf{Yes} & \textbf{Yes} \\
    Firefox  & \textbf{Yes} & No & No & \textbf{Yes} & No & No \\ 
    Edge   & \textbf{Yes} & \textbf{Yes} & \textbf{Yes} & \textbf{Yes} & \textbf{Yes} & \textbf{Yes} \\
    Opera            & \textbf{Yes} & \textbf{Yes} & No & No & No & No \\
    Brave            & \textbf{Yes} & \textbf{Yes} & \textbf{Yes} & \textbf{Yes} & \textbf{Yes} & \textbf{Yes} \\
    \bottomrule
    \end{tabular}
    \caption{Listed resolvers under browser's DNS settings.}
    \label{tab:SupportedResolvers}
\end{table}

\Fref{tab:SupportedResolvers} lists the DoH resolvers that have been deployed to users of major browsers as of October 20th, 2021~\cite{bravebrowser,edgebrowser,ffbrowser,chromebrowser,operabrowser}.
We define the resolvers listed in ~\Fref{tab:SupportedResolvers} as mainstream. 
Importantly, many other DoH resolvers have been deployed that are currently not in use by major browser deployments~\cite{dnscrypt}.
Although DoH addresses passive eavesdropping of DNS queries, it does not prevent resolvers \emph{themselves} from seeing the contents of DNS queries.
Thus, some have argued that major browser-based DoH deployments shift privacy concerns from eavesdroppers to potential misuse by major DNS providers~\cite{vixie}.

A number of previous studies have measured encrypted DNS performance, but they have mostly focused on mainstream DNS resolvers~\cite{borgolte2019dns,hounsel2020comparing,KResolver,lu2019end-to-end}.
By contrast, we begin to explore the usability of the DoH ecosystem \emph{as a whole}, rather than just major providers.
In this paper, we make the following contributions:
\begin{itemize}
    \item We measure DoH response times from three global vantage points for a large list of resolvers.
    \item We study whether users must use a major provider to experience acceptable DoH response times.
    \item We study how the performance of various DoH resolvers differ based on client location.
    \item We modify an open-source DNS measurement tool to support further research on DoH performance, and we make our modifications publicly available.
\end{itemize}

We begin by providing a historical background on the DNS, including the origin of encrypted DNS and related standards.
We then list our specific research questions and provide a description of the experiments we conducted to answer these questions.
We compare DNS query response times within major geographical areas based on the location of the resolvers—-\ie, North America, Asia, and Europe.
Finally, we discuss the implications of our results and provide possible directions for future research.
