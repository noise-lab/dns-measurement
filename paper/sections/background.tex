\section{Background}\label{sec:background}

The Domain Name System (DNS) translates human-readable domain names into
Internet Protocol (IP) addresses, which are used to route
traffic~\cite{dns-rfcs}.  These queries are traditionally unencrypted, which
enables on-path eavesdroppers to intercept queries and manipulate responses.

Protocols for encrypting DNS traffic have been proposed, standardized, and
deployed in recent years, including DNS-over-HTTPS (DoH) and DNS-over-TLS
(DoT).  Hu et al. proposed DoT in 2016 to address the eavesdropping and
tampering of DNS queries~\cite{hu2016DoT}.  It uses a dedicated port (853)
to communicate with resolvers over a TLS connection.  In contrast,
DoH---proposed by Hoffman et al. in 2018---establishes HTTPS sessions with
resolvers over port 443~\cite{hoffman2018DoH}.  This design decision enables
DoH traffic to use HTTPS as a transport, facilitating deployment as well as
making it difficult for network operators and eavesdroppers to intercept DNS
queries and responses~\cite{boettger2019empirical}. DoH can function in many
environments where DoT is easily blocked.

Encrypting DNS queries and responses hides queries from eavesdroppers but the
recipient of the queries---the DNS resolver---can see the
queries~\cite{IEEEfight}. By design, recursive resolvers receive queries from
clients and may perform additional queries to other name servers to resolve
domain names.  For these resolvers to determine what additional
queries they need to perform (or determine if the query can be answered from a
cache), they must decrypt the queries that they receive from clients.  Thus,
although DoT and DoH make it difficult for network operators and eavesdroppers
to intercept DNS traffic, recursive resolvers can still
observe (and potentially, log) the queries that they receive from clients.
The fact that many mainstream DoH providers (e.g., Google) already collect
significant information about users potentially raises additional privacy
concerns and makes it appealing for users to have a large number of encrypted
DNS resolvers that are reliable and perform well.

Most major browsers currently support DoH, including Brave, Chrome, Edge,
Firefox, Opera, Safari, and Vivaldi.  Operating systems have also announced
plans to implement DoH, including iOS, MacOS, and
Windows~\cite{ffSettings,operaEdgeSettings,vivaldiSettings,iosSettings,jensen2020windows}.
For this study, we chose to focus on DoH because it is more widely implemented
than DoT.  Each of these browsers and operating systems either
currently support or have announced support for DoH (but not
DoT)~\cite{lack-of-dot-support}.

Previous studies measuring DoT and DoH response times largely
focus on and compare the protocols as a whole, rather than the performance of
individual resolvers~\cite{lu2019end-to-end}.  
In this paper, we measure query response times and reachability for a large
list of DoH resolvers, many of which are not available as default options in
major browsers. 
Our research specifically
focuses on collecting measurements of the larger DoH ecosystem to better
understand what options are practically available to DoH clients.

